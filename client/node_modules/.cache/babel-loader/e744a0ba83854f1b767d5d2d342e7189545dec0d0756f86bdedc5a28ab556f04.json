{"ast":null,"code":"/* eslint-disable no-unused-vars */\nimport axios from 'axios';\nimport { FETCH_DATA } from './types';\nexport const fetchData = input => {\n  const inputObj = input;\n  return {\n    type: FETCH_DATA,\n    payload: inputObj\n  };\n};\nexport const signout = callback => {\n  localStorage.removeItem('token');\n  callback();\n  return {\n    type: 'AUTH_USER',\n    payload: ''\n  };\n};\nexport async function signin(formProps, callback) {\n  const response = await axios.post('http://localhost:5000/auth/signin', formProps);\n  if (response.data.token) {\n    localStorage.setItem('token', response.data.token);\n    callback();\n    // .then(function (response) {\n    //   dispatch({ type: AUTH_USER, payload: response.data });\n\n    //   callback();\n    // })\n    // .catch(function (error) {\n    //   dispatch({ type: AUTH_ERROR, payload: error });\n    // });\n    return {\n      type: 'AUTH_USER',\n      payload: response.data\n    };\n  }\n  return {\n    type: 'AUTH_ERROR',\n    payload: response.data.error\n  };\n}\nexport async function signup(formProps, callback) {\n  const response = await axios.post('http://localhost:5000/auth/signup', formProps);\n  localStorage.setItem('token', response.data.token);\n  localStorage.setItem('name', response.data.name);\n  callback();\n  return {\n    type: 'AUTH_USER',\n    payload: response.data\n  };\n}\nexport async function fetchUser() {\n  const config = {\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n    }\n  };\n  axios.get(\"http://localhost:5000/auth/current_user\", config).then(function (response) {\n    dispatch({\n      type: AUTH_USER,\n      payload: response.data\n    });\n    localStorage.setItem(\"token\", response.data.token);\n  }).catch(function (error) {\n    console.log(error);\n  });\n}\n;","map":{"version":3,"names":["axios","FETCH_DATA","fetchData","input","inputObj","type","payload","signout","callback","localStorage","removeItem","signin","formProps","response","post","data","token","setItem","error","signup","name","fetchUser","config","headers","Authorization","getItem","get","then","dispatch","AUTH_USER","catch","console","log"],"sources":["/Users/natalia/sleeping-app/client/src/actions/index.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport axios from 'axios';\nimport { FETCH_DATA } from './types';\n\nexport const fetchData = (input) => {\n  const inputObj = input;\n\n  return { type: FETCH_DATA, payload: inputObj };\n};\n\nexport const signout = (callback) => {\n  localStorage.removeItem('token');\n  callback();\n\n  return { type: 'AUTH_USER', payload: '' };\n};\n\nexport async function signin(formProps, callback) {\n  const response = await axios.post(\n    'http://localhost:5000/auth/signin',\n    formProps\n  );\n  if (response.data.token) {\n    localStorage.setItem('token', response.data.token);\n    callback();\n    // .then(function (response) {\n    //   dispatch({ type: AUTH_USER, payload: response.data });\n\n    //   callback();\n    // })\n    // .catch(function (error) {\n    //   dispatch({ type: AUTH_ERROR, payload: error });\n    // });\n    return { type: 'AUTH_USER', payload: response.data };\n  }\n  return {\n    type: 'AUTH_ERROR',\n    payload: response.data.error,\n  };\n}\n\nexport async function signup(formProps, callback) {\n  const response = await axios.post(\n    'http://localhost:5000/auth/signup',\n    formProps\n  );\n  localStorage.setItem('token', response.data.token);\n  localStorage.setItem('name', response.data.name);\n  callback();\n\n  return { type: 'AUTH_USER', payload: response.data };\n}\n\nexport async function fetchUser(){\n  const config = {\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n    },\n  };\n\n  axios\n    .get(\"http://localhost:5000/auth/current_user\", config)\n    .then(function (response) {\n      dispatch({ type: AUTH_USER, payload: response.data });\n      localStorage.setItem(\"token\", response.data.token);\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n};"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,SAAS;AAEpC,OAAO,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAClC,MAAMC,QAAQ,GAAGD,KAAK;EAEtB,OAAO;IAAEE,IAAI,EAAEJ,UAAU;IAAEK,OAAO,EAAEF;EAAS,CAAC;AAChD,CAAC;AAED,OAAO,MAAMG,OAAO,GAAIC,QAAQ,IAAK;EACnCC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;EAChCF,QAAQ,EAAE;EAEV,OAAO;IAAEH,IAAI,EAAE,WAAW;IAAEC,OAAO,EAAE;EAAG,CAAC;AAC3C,CAAC;AAED,OAAO,eAAeK,MAAM,CAACC,SAAS,EAAEJ,QAAQ,EAAE;EAChD,MAAMK,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAI,CAC/B,mCAAmC,EACnCF,SAAS,CACV;EACD,IAAIC,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;IACvBP,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAEJ,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;IAClDR,QAAQ,EAAE;IACV;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA,OAAO;MAAEH,IAAI,EAAE,WAAW;MAAEC,OAAO,EAAEO,QAAQ,CAACE;IAAK,CAAC;EACtD;EACA,OAAO;IACLV,IAAI,EAAE,YAAY;IAClBC,OAAO,EAAEO,QAAQ,CAACE,IAAI,CAACG;EACzB,CAAC;AACH;AAEA,OAAO,eAAeC,MAAM,CAACP,SAAS,EAAEJ,QAAQ,EAAE;EAChD,MAAMK,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAI,CAC/B,mCAAmC,EACnCF,SAAS,CACV;EACDH,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAEJ,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;EAClDP,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAEJ,QAAQ,CAACE,IAAI,CAACK,IAAI,CAAC;EAChDZ,QAAQ,EAAE;EAEV,OAAO;IAAEH,IAAI,EAAE,WAAW;IAAEC,OAAO,EAAEO,QAAQ,CAACE;EAAK,CAAC;AACtD;AAEA,OAAO,eAAeM,SAAS,GAAE;EAC/B,MAAMC,MAAM,GAAG;IACbC,OAAO,EAAE;MACPC,aAAa,EAAE,SAAS,GAAGf,YAAY,CAACgB,OAAO,CAAC,OAAO;IACzD;EACF,CAAC;EAEDzB,KAAK,CACF0B,GAAG,CAAC,yCAAyC,EAAEJ,MAAM,CAAC,CACtDK,IAAI,CAAC,UAAUd,QAAQ,EAAE;IACxBe,QAAQ,CAAC;MAAEvB,IAAI,EAAEwB,SAAS;MAAEvB,OAAO,EAAEO,QAAQ,CAACE;IAAK,CAAC,CAAC;IACrDN,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAEJ,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;EACpD,CAAC,CAAC,CACDc,KAAK,CAAC,UAAUZ,KAAK,EAAE;IACtBa,OAAO,CAACC,GAAG,CAACd,KAAK,CAAC;EACpB,CAAC,CAAC;AACN;AAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}