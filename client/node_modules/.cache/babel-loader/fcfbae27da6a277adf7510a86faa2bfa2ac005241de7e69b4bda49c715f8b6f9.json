{"ast":null,"code":"/* eslint-disable no-unused-vars */\nimport axios from 'axios';\nconst authUrl = 'http://localhost:5000/auth/';\nexport const signout = callback => {\n  localStorage.removeItem('token');\n  callback();\n  return {\n    type: 'AUTH_USER',\n    payload: ''\n  };\n};\nexport async function signin(formProps, callback) {\n  try {\n    const response = await axios.post(`${authUrl}signin`, formProps);\n    localStorage.setItem('token', response.data.token);\n    callback();\n    return {\n      type: 'AUTH_USER',\n      payload: response.data\n    };\n  } catch (error) {\n    return {\n      type: 'AUTH_ERROR',\n      payload: error.message\n    };\n  }\n}\nexport async function signup(formProps, callback) {\n  try {\n    const response = await axios.post(`${authUrl}signup`, formProps);\n    localStorage.setItem('token', response.data.token);\n    callback();\n    return {\n      type: 'AUTH_USER',\n      payload: response.data\n    };\n  } catch (error) {\n    return {\n      type: 'AUTH_ERROR',\n      payload: error.response.data.error\n    };\n  }\n}\nexport async function fetchUser() {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('token')}`\n    }\n  };\n  try {\n    const response = await axios.get('http://localhost:5000/auth/current_user', config);\n    localStorage.setItem('token', response.data.token);\n    return {\n      type: 'AUTH_USER',\n      payload: response.data\n    };\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function postForm(sleepData, callback) {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('token')}`\n    }\n  };\n  try {\n    const response = await axios.post('http://localhost:5000/api/sleepy_post', {\n      sleepData\n    }, config);\n    localStorage.setItem('token', response.data.token);\n    const responseObj = {\n      date: response.data.date,\n      age: response.data.age.months,\n      wakeUp: response.data.wakeUp,\n      // ww1: response.data.ww1,\n      // nap1: response.data.nap1,\n      // ww2: response.data.ww2,\n      // nap2: response.data.nap2 || '-',\n      // ww3: response.data.ww3 || '-',\n      // nap3: response.data.nap3 || '-',\n      // ww4: response.data.ww4 || '-',\n      // nap4: response.data.nap4 || '-',\n      bedTime: response.data.wakeUp\n      // sumAwake: response.data.sumAwake,\n      // lastNap: response.data.lastNap,\n    };\n\n    console.log(responseObj);\n    callback();\n    return {\n      type: 'POST_SLEEP',\n      payload: responseObj\n    };\n  } catch (error) {\n    return {\n      type: 'POST_SLEEP_ERROR',\n      payload: error.message\n    };\n  }\n}","map":{"version":3,"names":["axios","authUrl","signout","callback","localStorage","removeItem","type","payload","signin","formProps","response","post","setItem","data","token","error","message","signup","fetchUser","config","headers","Authorization","getItem","get","console","log","postForm","sleepData","responseObj","date","age","months","wakeUp","bedTime"],"sources":["/Users/natalia/Dropbox/code/sleeping-app/client/src/actions/index.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport axios from 'axios';\n\nconst authUrl = 'http://localhost:5000/auth/';\n\nexport const signout = (callback) => {\n  localStorage.removeItem('token');\n  callback();\n\n  return { type: 'AUTH_USER', payload: '' };\n};\n\nexport async function signin(formProps, callback) {\n  try {\n    const response = await axios.post(`${authUrl}signin`, formProps);\n    localStorage.setItem('token', response.data.token);\n    callback();\n    return { type: 'AUTH_USER', payload: response.data };\n  } catch (error) {\n    return {\n      type: 'AUTH_ERROR',\n      payload: error.message,\n    };\n  }\n}\n\nexport async function signup(formProps, callback) {\n  try {\n    const response = await axios.post(\n      `${authUrl}signup`,\n      formProps\n    );\n    localStorage.setItem('token', response.data.token);\n    callback();\n\n    return { type: 'AUTH_USER', payload: response.data };\n  } catch (error) {\n    return {\n      type: 'AUTH_ERROR',\n      payload: error.response.data.error,\n    };\n  }\n}\n\nexport async function fetchUser() {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n  };\n  try {\n    const response = await axios.get(\n      'http://localhost:5000/auth/current_user',\n      config\n    );\n    localStorage.setItem('token', response.data.token);\n    return { type: 'AUTH_USER', payload: response.data };\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function postForm(sleepData, callback) {\n  const config = {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n  };\n  try {\n    const response = await axios.post(\n      'http://localhost:5000/api/sleepy_post',\n      { sleepData },\n      config\n    );\n    localStorage.setItem('token', response.data.token);\n\n    const responseObj = {\n      date: response.data.date,\n      age: response.data.age.months,\n      wakeUp: response.data.wakeUp,\n      // ww1: response.data.ww1,\n      // nap1: response.data.nap1,\n      // ww2: response.data.ww2,\n      // nap2: response.data.nap2 || '-',\n      // ww3: response.data.ww3 || '-',\n      // nap3: response.data.nap3 || '-',\n      // ww4: response.data.ww4 || '-',\n      // nap4: response.data.nap4 || '-',\n      bedTime: response.data.wakeUp,\n      // sumAwake: response.data.sumAwake,\n      // lastNap: response.data.lastNap,\n    };\n    console.log(responseObj);\n    callback();\n    return { type: 'POST_SLEEP', payload: responseObj };\n  } catch (error) {\n    return {\n      type: 'POST_SLEEP_ERROR',\n      payload: error.message,\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}